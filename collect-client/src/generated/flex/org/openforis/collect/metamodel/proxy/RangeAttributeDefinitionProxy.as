/**
 * Generated by Gas3 v2.2.0 (Granite Data Services).
 *
 * NOTE: this file is only generated if it does not exist. You may safely put
 * your custom code here.
 */

package org.openforis.collect.metamodel.proxy {
	import mx.collections.ArrayCollection;
	import mx.collections.IList;

	/**
	 * @author S. Ricci
	 * */
    [Bindable]
    [RemoteClass(alias="org.openforis.collect.metamodel.proxy.RangeAttributeDefinitionProxy")]
    public class RangeAttributeDefinitionProxy extends RangeAttributeDefinitionProxyBase {
		
		private var _units:IList;
		private var _defaultPrecision:PrecisionProxy;
		private var _defaultPrecisionInited:Boolean = false;
		
		public function get units():IList {
			if(_units == null) {
				var result:IList = new ArrayCollection();
				for each (var prec:PrecisionProxy in precisionDefinitions) {
					if(prec.unit != null) {
						result.addItem(prec.unit);
					}
				}
				_units = result;
			}
			return _units;
		}
		
		public function get defaultPrecision():PrecisionProxy {
			if(! _defaultPrecisionInited) {
				for each (var prec:PrecisionProxy in precisionDefinitions) {
					if(prec.defaultPrecision) {
						_defaultPrecision = prec;
						break;
					}
				}
				_defaultPrecisionInited = true;
			}
			return _defaultPrecision;
		}
		
		public function get defaultUnit():UnitProxy {
			if(defaultPrecision != null) {
				return defaultPrecision.unit;
			} else if(units != null && units.length == 1) {
				return units.getItemAt(0) as UnitProxy;
			} else {
				return null;
			}
		}
    }
}